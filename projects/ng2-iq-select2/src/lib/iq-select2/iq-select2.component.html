<div class="select2-container">
  <div
    class="select2-inner-container" [ngClass]="inputContainerClass ? inputContainerClass : ''"
    [class.simple-selection]="!multiple" [class.multiple-selection]="multiple"
    [class.search-focused]="searchFocused" [class.readonly]="disabled"
    (click)="focusAndShowResults()"
  >
    <ul class="select2-selection-container">
      <ng-container *ngIf="!searchFocused || multiple">
        <li *ngFor="let item of selectedItems" class="select2-selected">
          <span class="select2-selected-item" [ngStyle]="{whitespace: wrapSelectedText}" [title]="item.text">{{item.text}}</span>
          <button *ngIf="!disabled" class="select2-icon" aria-label="Close" (click)="removeItem(item)">
            <span class="select2-selection-remove" [innerHTML]="iconDelete"></span>
          </button>
        </li>
      </ng-container>

      <li class="select2-input-container">
        <input #termInput *ngIf="!disabled" [formControl]="term" type="text" [placeholder]="getPlaceholder()"
          [class.transparent]="!multiple && selectedItems.length > 0 && !searchFocused"
          (focus)="onFocus()" (blur)="onBlur()"
          (keyup)="onKeyUp($event)" (keydown)="onKeyDown($event)"
        />
      </li>
    </ul>

    <div *ngIf="(multiple || (!multiple && selectedItems.length === 0))" class="select2-icon">
      <span class="select2-selection-caret" [innerHTML]="iconCaret"></span>
    </div>
  </div>

  <iq-select2-results *ngIf="!disabled" #results [resultsVisible]="resultsVisible"
    [items]="listData" [selectedItems]="selectedItems" [maxResults]="maxResults"
    [messageMoreResults]="messageMoreResults" [messageNoResults]="messageNoResults"
    [templateRef]="templateRef" (onItemSelected)="onItemSelected($event);"
  >
  </iq-select2-results>
</div>
